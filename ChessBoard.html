<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Board</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            flex-direction: column;
        }
        .chess-board {
            display: grid;
            grid-template-columns: repeat(13, 60px);
            grid-template-rows: repeat(13, 60px);
            border: 2px solid #333;
        }
        .chess-board .square {
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 36px;
            cursor: pointer;
        }
        .chess-board .white {
            background-color: #fff;
			border: 2px solid #0384a1; /* 添加框線樣式 */
			box-sizing: border-box; /* 確保框線不影響方塊佈局 */
        }
        .chess-board .black {
            background-color: #000;
			border: 2px solid #0384a1; /* 添加框線樣式 */
			box-sizing: border-box; /* 確保框線不影響方塊佈局 */
            color: #fff;
        }
        .highlight {
            background-color: yellow !important;
        }
        .movable {
			background-color: lightgreen !important;
		}

    </style>
</head>
<body>
    <div>
        <h1>Made in https://chatgpt.com</h1>
    </div>
    <br>
    <div class="chess-board">
        <!-- The squares and pieces will be generated by JavaScript -->
    </div>

    <script>
        const board = document.querySelector('.chess-board');
        const pieces = {
            whitePawn: '♙',
            blackPawn: '♟'
        };

        let selectedSquare = null;
        let movableSquares = [];

        for (let row = 0; row < 13; row++) {
            for (let col = 0; col < 13; col++) {
                const square = document.createElement('div');
                square.classList.add('square');
                square.dataset.row = row;
                square.dataset.col = col;

                // Alternate color
                if ((row + col) % 2 === 0) {
                    square.classList.add('white');
                } else {
                    square.classList.add('black');
                }

                // Add pawns to the board
                if (row === 6 && col ===6) {
                    square.textContent = pieces.blackPawn; // Black pawns
                } else if (row === -1) {
                    square.textContent = pieces.whitePawn; // White pawns
                }

                // Add click event listener
                square.addEventListener('click', () => {
					var ExselectedSquare=null;
					if(selectedSquare && square.classList.contains('movable')){
						console.log('can move' )
						ExselectedSquare=selectedSquare;
						square.textContent=ExselectedSquare.textContent;
						ExselectedSquare.textContent=null;
					}
                    if (selectedSquare) {
                        selectedSquare.classList.remove('highlight');
                        movableSquares.forEach(sq => sq.classList.remove('movable'));
                        movableSquares = [];
                    }

                    selectedSquare = square;
                    square.classList.add('highlight');
                    const row = parseInt(square.dataset.row);
                    const col = parseInt(square.dataset.col);

                    if (square.textContent === pieces.blackPawn || square.textContent === pieces.whitePawn) {
					const minDistance = 1; // 最小可移動距離
					const maxDistance = 3; // 最大可移動距離
					
					const directions = [];
					for (let dRow = -maxDistance; dRow <= maxDistance; dRow++) {
						for (let dCol = -maxDistance; dCol <= maxDistance; dCol++) {
							if (Math.abs(dRow) + Math.abs(dCol) >= minDistance && Math.abs(dRow) + Math.abs(dCol) <= maxDistance) {
								directions.push({ row: dRow, col: dCol });
							}
						}
					}



                        directions.forEach(direction => {
                            const newRow = row + direction.row;
                            const newCol = col + direction.col;
                            if (newRow >= 0 && newRow < 13 && newCol >= 0 && newCol < 13) {
                                const targetSquare = board.querySelector(`.square[data-row='${newRow}'][data-col='${newCol}']`);
                                if (targetSquare && targetSquare.textContent === '') {
                                    targetSquare.classList.add('movable');
                                    movableSquares.push(targetSquare);
                                }
                            }
                        });
                    }
                });

                board.appendChild(square);
            }
        }
    </script>
</body>
</html>
